<template>
  <div>
    <div id="test" style="width: 600px; height: 500px"></div>
  </div>
</template>

<style scoped>
</style>
<script lang="ts">
import Vue from "vue";
import * as Plotly from "plotly.js/lib/core";
import {
  Datum,
  ScatterData,
  Layout,
  newPlot,
  PlotData,
  ViolinData,
  CandlestickData,
  PieData,
} from "plotly.js/lib/core";

export default Vue.extend({
  name: "PCA2D",

  data(): {
    items: Array<{ title: string; icon: string }>;
  } {
    return {
      items: [
        { title: "Dashboard", icon: "mdi-view-dashboard" },
        { title: "Photos", icon: "mdi-image" },
        { title: "About", icon: "mdi-help-box" },
      ],
    };
  },
  methods: {
    test() {
      // let pca_matrix = [
      //   [0.0809513917012624, -1.1586542064482852],
      //   [-2.016452930878941, 2.3096992657465796],
      //   [-3.3618471908969996, -1.2528509236330259],
      //   [5.297348730074678, 0.10180586433473177],
      // ];
      // let pca_matrix = [
      //   [0.06466035755239131, 0.3418142112619438],
      //   [-0.4198377369454968, -0.0194701809958681],
      //   [-0.29185436514055485, 0.056003386860053295],
      //   [-0.10985791497275073, -0.190574550157743],
      //   [-0.25285884011136134, -0.07451363889241563],
      //   [-0.21315731165277568, -0.02840464190725059],
      //   [0.7211954147340823, -0.07832469446021928],
      //   [0.5017103965364648, -0.006529891708501455],
      // ];
      let pca_matrix = [
        [0.6991538137950032, 0.8254195428496953],
        [1.3853937084614283, -1.0941718469120458],
        [0.3728334884926278, -0.06433387693637807],
        [-0.02133321684837044, 0.4165051911137321],
        [-0.7073410735298612, -0.08257495375320817],
        [-0.9889218965627863, -0.15858766526916201],
        [-0.8772847061253082, -0.13335234670905158],
        [0.3504537095752563, 0.4624604179811455],
        [1.0195279775367958, -0.9915648266715354],
        [0.32596900881880053, 0.140005765444733],
        [0.22406139815171222, 0.5255095714492726],
        [-0.6965648654572475, -0.10755299344973314],
        [-0.977738109912156, -0.17128101944369048],
        [-0.8489210700003919, -0.12659035247009826],
        [0.5034856183560729, 0.45178533126863346],
        [0.727955921887587, -0.9246766649981978],
        [0.3323189540526331, 0.057036003206347635],
        [-0.06970367622246511, 0.3414030430741973],
        [-0.811531380797197, -0.18039110923115234],
        [-0.8566641953855402, -0.09893482056304652],
        [-0.8153096159765892, -0.11962103128729244],
        [0.6044523191668936, 0.6347174711214436],
        [0.7609453830087338, -0.9166946065456042],
        [0.1621630659656288, 0.29669383221837076],
        [0.009225408726074762, 0.4962295011195857],
        [-0.8579504031757088, -0.14551691638056943],
        [-0.9047264926708807, -0.15393208111068213],
        [-0.8183442277105047, -0.11509446314441521],
        [0.5561680727946171, 0.4381281716420829],
        [1.0735736084438119, -1.0730524412988003],
        [0.23847202254556532, 0.015893715125455052],
        [0.18901633606383353, 0.5748555905806588],
        [-0.7486012231321312, -0.14483260615917692],
        [-0.9776447826353394, -0.16631840407315476],
        [-0.649541446245251, -0.08880542078732155],
        [0.5527901863454084, 0.5286251002302775],
        [1.2015317937404444, -1.0811717672155594],
        [0.12681754916672264, 0.09784472128965371],
        [0.12074523291104136, 0.5664692511108254],
        [-0.7089183107159424, -0.14222987972392676],
        [-1.014885275301711, -0.1729798158716778],
        [-0.8310471090088724, -0.12353633450594681],
        [1.3544132131173592, 1.0050886250486675],
        [1.6054457155361355, -1.1073495107935118],
        [0.9716770196509089, 0.6924255586514405],
        [0.6589513934612394, 0.9383512354281256],
        [-0.5280948373577321, -0.0921176671842667],
        [-0.8551317254156724, -0.1266536491954308],
        [-0.7375792237168862, -0.13823230358337096],
        [1.1616364202407923, 0.8704423957955434],
        [1.1087087505751287, -1.0515990676706988],
        [0.6310567581013117, 0.3914819073181676],
        [0.6267286927090788, 0.7403079395039287],
        [-0.6873608571450339, -0.14094642685397538],
        [-0.8791501063214135, -0.1369421349050412],
        [-0.7853827140276595, -0.13604087787426244],
      ];

      const data = [];
      pca_matrix.forEach((value: number[]) => {
        const trace = {
          x: [value[0]],
          y: [value[1]],
          mode: "markers",
          type: "scatter",
        } as Plotly.ScatterData;
        data.push(trace);
      });
      return data;
    },
  },
  mounted() {
    const data = this.test();
    var graphDiv = document.getElementById("test");
    if (graphDiv) {
      // console.log("element: ", element);
      // const graphDiv = "#test";

      const layout = {
        title: "Sales Growth",
        xaxis: {
          title: "Year",
        },
        yaxis: {
          title: "Percent",
        },
        uirevision: "true",
      };
      console.log("data:", data);
      Plotly.newPlot(graphDiv, data, layout);
    }
  },
});
</script>
