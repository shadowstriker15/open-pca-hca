<template>
  <div>
    <v-navigation-drawer class="side-nav" width="5rem" permanent app>
      <v-list dense nav class="py-0">
        <!-- Logo -->
        <v-list-item class="logo-item">
          <v-img src="@/assets/logos/logo.svg"></v-img>
        </v-list-item>

        <!-- PCA 2D Scatter -->
        <v-tooltip open-delay="1500" right>
          <template v-slot:activator="{ on, attrs }">
            <v-list-item
              @click="changeGraph('pca-2d-scatter')"
              :class="getItemClass('pca-2d-scatter')"
              v-bind="attrs"
              v-on="on"
            >
              <svg
                width="2rem"
                height="2rem"
                version="1.1"
                viewBox="0 0 96.814 97.575"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g fill="currentColor" transform="translate(33.196 -49.187)">
                  <path
                    d="m-26.24 49.187c-3.5242-.04311-7.1385 2.7985-7.1893 8.4629l.23261 77.013c.47297 8.1103 5.6229 11.827 12.48 11.906l75.834.19223c5.5776.0141 8.4873-2.8121 8.4991-6.3366.0118-3.5244-2.8791-6.3731-8.4567-6.3872l-75.625-.1912.68161-76.041c.05077-5.6643-2.9322-8.5753-6.4565-8.6184zm0 0c-3.5242-.04311-7.1385 2.7985-7.1893 8.4629l.23261 77.013c.47297 8.1103 5.6229 11.827 12.48 11.906l75.834.19223c5.5776.0141 8.4873-2.8121 8.4991-6.3366.0118-3.5244-2.8791-6.3731-8.4567-6.3872l-75.625-.1912.68161-76.041c.05077-5.6643-2.9322-8.5753-6.4565-8.6184zm84.865 13.6a7.4857 7.4857 0 01-7.4857 7.4857 7.4857 7.4857 0 01-7.4857-7.4857 7.4857 7.4857 0 017.4857-7.4857 7.4857 7.4857 0 017.4857 7.4857zm-27.192 8.2944c0 4.1342-3.3514 7.4857-7.4857 7.4857s-7.4857-3.3514-7.4857-7.4857 3.3514-7.4857 7.4857-7.4857 7.4857 3.3514 7.4857 7.4857zm0 0a7.4857 7.4857 0 01-7.4857 7.4857 7.4857 7.4857 0 01-7.4857-7.4857 7.4857 7.4857 0 017.4857-7.4857 7.4857 7.4857 0 017.4857 7.4857zm24.477 14.968a7.4857 7.4857 0 01-7.4857 7.4856 7.4857 7.4857 0 01-7.4857-7.4856 7.4857 7.4857 0 017.4857-7.4857 7.4857 7.4857 0 017.4857 7.4857zm-23.424 5.9018a7.4857 7.4857 0 01-7.4857 7.4857 7.4857 7.4857 0 01-7.4857-7.4857 7.4857 7.4857 0 017.4857-7.4857 7.4857 7.4857 0 017.4857 7.4857zm-8.9663 21.606a7.4857 7.4857 0 01-7.4857 7.4856 7.4857 7.4857 0 01-7.4857-7.4856 7.4857 7.4857 0 017.4857-7.4856 7.4857 7.4857 0 017.4857 7.4856zm-21.923 4.547a7.4857 7.4857 0 01-7.4857 7.4856 7.4857 7.4857 0 01-7.4857-7.4856 7.4857 7.4857 0 017.4857-7.4856 7.4857 7.4857 0 017.4857 7.4856zm6.1139-26.905a7.4857 7.4857 0 01-7.4857 7.4857 7.4857 7.4857 0 01-7.4857-7.4857 7.4857 7.4857 0 017.4857-7.4857 7.4857 7.4857 0 017.4857 7.4857z"
                    stroke-linejoin="round"
                    style="-inkscape-stroke: none"
                  />
                </g>
              </svg>
            </v-list-item>
          </template>
          <span>PCA 2D Scatter</span>
        </v-tooltip>
        <!-- /PCA 2D Scatter -->

        <!-- PCA 3D Scatter -->
        <v-tooltip open-delay="1500" right>
          <template v-slot:activator="{ on, attrs }">
            <v-list-item
              @click="changeGraph('pca-3d-scatter')"
              :class="getItemClass('pca-3d-scatter')"
              v-bind="attrs"
              v-on="on"
            >
              <svg
                width="2rem"
                height="2rem"
                version="1.1"
                viewBox="0 0 44.339 38.428"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g fill="currentColor" transform="translate(1.1854 -88.052)">
                  <path
                    d="m33.147 92.482a2.7922 2.7922 0 01-2.7922 2.7922 2.7922 2.7922 0 01-2.7922-2.7922 2.7922 2.7922 0 012.7922-2.7922 2.7922 2.7922 0 012.7922 2.7922zm-2.5129 13.682a2.7922 2.7922 0 01-2.7922 2.7922 2.7922 2.7922 0 01-2.7922-2.7922 2.7922 2.7922 0 012.7922-2.7922 2.7922 2.7922 0 012.7922 2.7922zm-10.889-7.9577a2.7922 2.7922 0 01-2.7922 2.7922 2.7922 2.7922 0 01-2.7922-2.7922 2.7922 2.7922 0 012.7922-2.7922 2.7922 2.7922 0 012.7922 2.7922zm19.266 1.3961a2.7922 2.7922 0 01-2.7922 2.7922 2.7922 2.7922 0 01-2.7922-2.7922 2.7922 2.7922 0 012.7922-2.7922 2.7922 2.7922 0 012.7922 2.7922zm-23.035 7.9577a2.7922 2.7922 0 01-2.7922 2.7922 2.7922 2.7922 0 01-2.7922-2.7922 2.7922 2.7922 0 012.7922-2.7922 2.7922 2.7922 0 012.7922 2.7922zm-9.2141 4.8863a2.7922 2.7922 0 01-2.7922 2.7922 2.7922 2.7922 0 01-2.7922-2.7922 2.7922 2.7922 0 012.7922-2.7922 2.7922 2.7922 0 012.7922 2.7922zm-7.0772 10.768 20.029-11.706c.8381-.48982 1.9072-.20943 2.397.62868.48982.8381.20943 1.9072-.62867 2.397l-20.029 11.706c-.8381.48982-1.9072.20943-2.397-.62867-.48982-.83811-.20944-1.9072.62867-2.397zm23.095-11.779 19.43 10.135c.86069.44894 1.1922 1.5033.74324 2.364-.44894.8607-1.5033 1.1922-2.364.74324l-19.43-10.135c-.86069-.44894-1.1922-1.5033-.74324-2.364s1.5033-1.1922 2.364-.74324zm-3.1743.54459v-22.175c0-.97074.7815-1.7522 1.7522-1.7522s1.7522.7815 1.7522 1.7522v22.175c0 .97075-.7815 1.7522-1.7522 1.7522s-1.7522-.7815-1.7522-1.7522z"
                    stroke-linejoin="round"
                    stroke-width="1.6618"
                    style="
                      -inkscape-stroke: none;
                      paint-order: markers fill stroke;
                    "
                  />
                </g>
              </svg>
            </v-list-item>
          </template>
          <span>PCA 3D Scatter</span>
        </v-tooltip>
        <!-- /PCA 3D Scatter -->

        <v-divider class="pb-1"></v-divider>

        <!-- HCA Dendrogram -->
        <v-tooltip open-delay="1500" right>
          <template v-slot:activator="{ on, attrs }">
            <v-list-item
              @click="changeGraph('hca-dendrogram')"
              :class="getItemClass('hca-dendrogram')"
              v-bind="attrs"
              v-on="on"
            >
              <svg
                width="2rem"
                height="2rem"
                version="1.1"
                viewBox="0 0 91.307 71.296"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g transform="translate(-30.101 -164.35)">
                  <g fill="currentColor">
                    <path
                      transform="matrix(.26458 0 0 .26458 30.101 164.35)"
                      d="m14.41 0c-1.3393 0-2.6291.20251-3.8418.57812-.40423.1252-.79964.26896-1.1855.43164-1.1577.48805-2.2291 1.1407-3.1836 1.9277-.31816.26235-.62274.53876-.91406.83008s-.56968.59786-.83203.91602c-.5247.63632-.9887 1.3238-1.3848 2.0547-.19803.36545-.37833.74105-.54102 1.127-.16268.38591-.30839.78131-.43359 1.1855-.1252.40423-.23081.81785-.31641 1.2383-.1712.84087-.25977 1.7126-.25977 2.6055v6.0664c0 1.7858.35903 3.4857 1.0098 5.0293.16268.38591.34298.7615.54102 1.127.19803.36545.41327.71963.64453 1.0625.46252.68574.98963 1.3256 1.5723 1.9082 1.7479 1.7479 3.9989 2.9923 6.5215 3.5059.42043.0856.84674.15145 1.2812.19531.4345.04386.87582.06641 1.3223.06641h74.828v52.545h-74.328c-.44645 0-.88776.02254-1.3223.06641-.4345.04386-.86277.10971-1.2832.19531-2.5226.51358-4.7736 1.7599-6.5215 3.5078-.29132.29132-.56773.5959-.83008.91406-1.3118 1.5908-2.2478 3.5033-2.6758 5.6055-.1712.84087-.26172 1.7126-.26172 2.6055v6.0684c0 .44645.022543.88581.066406 1.3203.17545 1.738.69419 3.3722 1.4863 4.834.19803.36545.41132.72158.64258 1.0644.69377 1.0286 1.5338 1.9493 2.4883 2.7363.31816.26235.64932.51093.99219.74219.34287.23125.69705.44649 1.0625.64453.36545.19803.74105.37833 1.127.54101.77181.32537 1.583.57881 2.4238.75.42043.0856.8487.1495 1.2832.19336.4345.0439.87582.0664 1.3223.0664h93.289c7.1432 0 12.895-5.7494 12.895-12.893v-24.484h109.48v86.465h-217.68c-.8929 0-1.7646.0905-2.6055.26172-.42043.0856-.83405.1912-1.2383.31641-.80847.25041-1.5816.57853-2.3125.9746-.7309.39607-1.4184.86007-2.0547 1.3848-.31816.26235-.6247.54071-.91602.83203-.29132.29132-.56773.59591-.83008.91406-.26235.31816-.51093.64932-.74219.99219-.46251.68574-.86018 1.4176-1.1855 2.1894-.16268.38591-.30644.78327-.43164 1.1875-.37561 1.2127-.57812 2.5025-.57812 3.8418v6.0684c0 .8929.090523 1.7626.26172 2.6035.085598.42043.1912.83404.31641 1.2383.1252.40423.26896.79964.43164 1.1855.32537.77182.72303 1.5057 1.1855 2.1914.69377 1.0286 1.5338 1.9493 2.4883 2.7363.31816.26235.64932.51093.99219.74219 1.0286.69377 2.1623 1.2416 3.375 1.6172.40423.12521.81785.23081 1.2383.31641.42043.0856.8487.15145 1.2832.19531.4345.0439.87582.0664 1.3223.0664h167.36v40.41h-161.55c-.44645 0-.88776.0225-1.3223.0664-.86901.0877-1.7111.26131-2.5195.51172-.80847.25041-1.5816.57854-2.3125.97461-.36545.19803-.72158.41327-1.0645.64453s-.67403.47788-.99219.74024c-.95447.78705-1.7926 1.7097-2.4863 2.7383-.69377 1.0286-1.2416 2.1623-1.6172 3.375-.25041.80846-.42399 1.6525-.51172 2.5215-.043863.4345-.066406.87582-.066406 1.3223v6.0664c0 .44645.022543.88776.066406 1.3223.043863.4345.10776.86277.19336 1.2832.42799 2.1022 1.366 4.0147 2.6777 5.6055.26235.31816.53876.6247.83008.91602 1.4566 1.4566 3.262 2.5634 5.2832 3.1894.40423.1252.81785.23081 1.2383.3164.84087.1712 1.7106.26172 2.6035.26172h180.51c7.1432 0 12.895-5.7514 12.895-12.895v-59.371h37.424c7.1425 0 12.893-5.7503 12.895-12.893v-47.783h69.777c1.7858 0 3.4837-.36099 5.0273-1.0117.77182-.32537 1.5057-.72303 2.1914-1.1856.34287-.23126.67403-.47788.99219-.74023 2.5453-2.0988 4.2663-5.1587 4.6172-8.6348.0439-.4345.0664-.87581.0664-1.3223v-6.0684c0-.44645-.0225-.88776-.0664-1.3223-.0439-.4345-.10971-.86081-.19531-1.2812-.17119-.84087-.42463-1.652-.75-2.4238-.16268-.38591-.34298-.7615-.54101-1.127-.99018-1.8273-2.4087-3.3867-4.123-4.543-.34287-.23126-.69705-.4465-1.0625-.64453-.73091-.39607-1.506-.72225-2.3144-.97266-.40424-.1252-.8159-.23276-1.2363-.31836-.84087-.17119-1.7126-.25976-2.6055-.25976h-69.777v-44.75c0-6.2503-4.403-11.434-10.289-12.633-.42043-.0856-.8487-.15145-1.2832-.19531-.43451-.04386-.87582-.06445-1.3223-.06445h-128.44v-24.061c0-.8929-.0905-1.7626-.26172-2.6035-.0694-.3408-.16032-.67362-.25586-1.0039.004-.13286.0195-.26262.0195-.39648v-6.0664c3e-5-7.1432-5.7513-12.895-12.894-12.895z"
                      stroke-linejoin="round"
                      stroke-width="3.7795"
                      style="-inkscape-stroke: none"
                    />
                  </g>
                </g>
              </svg>
            </v-list-item>
          </template>
          <span>HCA Dendrogram</span>
        </v-tooltip>
        <!-- /HCA Dendrogram -->

        <!-- HCA Heatmap -->
        <v-tooltip open-delay="1500" right>
          <template v-slot:activator="{ on, attrs }">
            <v-list-item
              @click="changeGraph('hca-heatmap')"
              :class="getItemClass('hca-heatmap')"
              v-bind="attrs"
              v-on="on"
            >
              <svg
                width="2rem"
                height="2rem"
                version="1.1"
                viewBox="0 0 79.547 76.452"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g fill="currentColor" transform="translate(-52.693 -92.517)">
                  <path
                    d="m106.28 95.356c25.142-1.7076 23.91-.56362 23.91 23.13h-23.91zm0 0c25.143-1.7076 23.91-.56364 23.91 23.13h-23.91zm-51.99 48.53h25.313v23.478c-26.048 1.6389-25.313 1.1904-25.313-23.478zm0 0h25.313v23.478c-26.048 1.6389-25.313 1.1905-25.313-23.478zm25.313-25.4h26.677v25.4h-26.677zm0 0h26.677v25.4h-26.677zm24.35-24.57h3.2v75.053h-3.2zm0 0h3.2v75.053h-3.2zm25.48 48.569v3.2h-75.053v-3.2zm0 0v3.2h-75.053v-3.2zm.40135-25.686v3.2h-75.053v-3.2zm0 0v3.2h-75.053v-3.2zm-52.176-22.882h3.2v75.053h-3.2zm0 0h3.2v75.053h-3.2zm-13.216-1.3986c-6.4835 0-11.752 5.2685-11.752 11.752v52.941c0 6.4835 5.2685 11.752 11.752 11.752h56.041c6.4835 0 11.754-5.2685 11.754-11.752v-52.941c0-6.4835-5.2704-11.752-11.754-11.752zm0 3.1992h56.041c4.766 0 8.5527 3.7867 8.5527 8.5527v52.941c0 4.766-3.7867 8.5527-8.5527 8.5527h-56.041c-4.766 0-8.5527-3.7867-8.5527-8.5527v-52.941c0-4.766 3.7867-8.5527 8.5527-8.5527z"
                    stroke-linejoin="round"
                    style="-inkscape-stroke: none"
                  />
                </g>
              </svg>
            </v-list-item>
          </template>
          <span>HCA Heatmap</span>
        </v-tooltip>
        <!-- /HCA Heatmap -->
      </v-list>
      <template v-slot:append>
        <!-- Theme Indicator/Switch -->
        <v-list-item @click="toggleTheme">
          <!-- Dark theme icon -->
          <svg
            v-if="theme == 'dark'"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <path
              fill="currentColor"
              d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"
            ></path>
          </svg>
          <!-- Light theme icon -->
          <svg
            v-else-if="theme == 'light'"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <circle cx="12" cy="12" r="4"></circle>
            <path
              d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"
            ></path>
          </svg>
          <!-- System theme icon -->
          <svg v-else xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"
            ></path>
          </svg>
        </v-list-item>
      </template>
    </v-navigation-drawer>
  </div>
</template>

<style scoped>
.side-nav {
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
}
.logo-item {
  padding-top: 1rem !important;
  padding-bottom: 2rem !important;
}
.selected-graph {
  background-color: #eee8fc;
  border-radius: 0.7rem !important;
}

.selected-graph svg {
  color: var(--v-primary-darken1) !important;
}

.v-list-item.icon {
  height: 3.3rem;
  width: 3.3rem;
}

.v-list-item.icon:hover {
  border-radius: 0.7rem !important;
}

.v-list--nav .v-list-item,
.v-list--nav .v-list-item:before {
  border-radius: 0.7rem !important;
}

.v-list--nav .v-list-item.icon {
  padding: 0 13px;
  margin-left: 5px;
  margin-right: 5px;
}
</style>

<script lang="ts">
import Vue from "vue";
import { Graphs } from "../@types/graphs";

export default Vue.extend({
  name: "SideNav",
  data(): {
    theme: "system" | "light" | "dark";
    selectedGraph: Graphs;
  } {
    return {
      theme: "system",
      selectedGraph: "pca-2d-scatter",
    };
  },
  watch: {
    theme: function () {
      this.isDark();
    },
  },
  methods: {
    async setTheme() {
      this.theme = await window.store.get("theme");
    },
    async toggleTheme() {
      this.theme = await window.theme.toggle();
    },
    async isDark() {
      this.$vuetify.theme.dark = await window.theme.isDark();
    },
    changeGraph(graph: Graphs) {
      this.selectedGraph = graph;
      this.$emit("graphChanged", graph);
    },
    getItemClass(graph: string) {
      let classes = ["icon"];
      if (this.selectedGraph == graph) classes.push("selected-graph");
      return classes;
    },
  },
  mounted() {
    this.setTheme();
    this.isDark();
  },
});
</script>
